<div class="pt-2 pb-2 mb-3">
  <ul class="nav nav-tabs">
    <li class="nav-item">
      <a class="nav-link active tab-icon" id="admin-sensors-tab" href="#detailed-sensors-tab" data-toggle="tab"
        role="tab" aria-controls="detailed-sensors" aria-selected="true"><i class="mr-2 icon-sensonode"></i>Sensor Details</a>
    </li>
  </ul>

  <div class="tab-content bg-white">
    <div class="tab-pane fade show active border border-top-0 p-3 mb-3 flex-grow-1 shadow" id="detailed-sensors-tab"
      role="tabpanle" area-labelledby="details-sensors-tab">
      <h5>{{pageType}} Sensor Detail</h5>
      <div class="row" *ngIf="sensorDetailsData">
        <div class="col-md-6 col-lg-6 col-xl-6">
          <div class="row">
            <div class="col-12 col-md-6 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="s_name">Sensor Name</label>
                <input
                class="form-control form-control-sm"
                placeholder="Sensor Name" type="text"
                id="s_name"
                [(ngModel)]="sensorDetailsData.sensorName"
                name="sensorName" #sensorName="ngModel"
                [disabled]="pageType==='View'"
                />
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="s_no">Serial Number</label>
                <input
                class="form-control form-control-sm"
                placeholder="Serial Number"
                type="text" id="s_no"
                [(ngModel)]="sensorDetailsData.serialNumber"
                name="serialNumber"
                #serialNumber="ngModel"
                [disabled]="pageType==='View'"
                 />
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="s_des">Description</label>
                <input class="form-control form-control-sm"
                placeholder="Description" type="text"
                id="s_des" [(ngModel)]="sensorDetailsData.description"
                name="description" #description="ngModel"
                [disabled]="pageType==='View'"
                />
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="s_type">Sensor Type</label>
                <input
                class="form-control form-control-sm"
                placeholder="Sensor type"
                type="text" id="s_type"
                [(ngModel)]="sensorDetailsData.sensorType"
                name="sensorTypeName" #sensorTypeName="ngModel"
                [disabled]="pageType==='View'"
                />
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="s_mo_nu">Model Number</label>
                <input
                class="form-control form-control-sm"
                placeholder="Model Number" type="text"
                id="s_mo_nu" [(ngModel)]="sensorDetailsData.modelNumber"
                name="sensorModelNumber" #sensorModelNumber="ngModel"
                [disabled]="pageType==='View'"
                />
              </div>
            </div>
            <div class="col-6 col-md-4 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="s_se_st">Sensor State</label>
                <input class="form-control form-control-sm"
                placeholder="Sensor State" type="text" id="s_se_st"
                [(ngModel)]="sensorDetailsData.sensorStatusName"
                name="sensorStatusName" #sensorStatusName="ngModel"
                [disabled]="pageType==='View'"
                />
              </div>
            </div>
            <div class="col-6 col-md-4 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="b_bt_le">Battery Level</label>
                <div class="input-group input-group-sm">
                  <div class="input-group-prepend">
                    <span class="input-group-text">
                      <span class="demo-icon icon-battery-75"></span>
                    </span>
                  </div>
                  <input class="form-control form-control-sm"
                  placeholder="Battery Level" type="text" id="s_bt_le"
                  [(ngModel)]="sensorDetailsData.batteryValue"
                  [disabled]="pageType==='View'"/>
                </div>
              </div>
            </div>
            <div class="col-6 col-md-4 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="s_bt_le">Signal Stregth</label>
                <div class="input-group input-group-sm">
                  <div class="input-group-prepend">
                    <span class="input-group-text">
                      <span class="demo-icon icon-signal-75"></span>
                    </span>
                  </div>
                  <input class="form-control form-control-sm"
                  placeholder="Signal Stregth" type="text" id="s_bt_le"
                  [(ngModel)]="sensorDetailsData.signalStrength"
                  [disabled]="pageType==='View'"/>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-6 col-lg-6 col-xl-6">
          <div class="row">
            <div class="col-12 col-md-6 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="s_ow_organization">Owning Organization</label>
                <input
                class="form-control form-control-sm"
                placeholder="Owning Organization" type="text"
                id="s_ow_organization"
                [(ngModel)] = "sensorDetailsData.parentOrganizationName"
                [disabled]="pageType==='View'"/>
              </div>
            </div>
            <div class="col-12 col-md-6 col-lg-4 col-xl-3">
              <div class="form-group">
                <label for="s_ins_loc">Installed Location</label>
                <ng-select class="custom" id="s_ins_loc"
                name="s_ins_loc"
                [(ngModel)]="sensorDetailsData.parentLocationId"
                #s_ins_loc="ngModel"
                [disabled]="pageType==='View'">
                  <ng-option *ngFor="let loc of locationListForDropDown" [value]="loc.id">{{loc.name}}</ng-option>
                </ng-select>
                <!-- <input *ngIf="(parentLocId || locId); else elseLocationPart" for="parentLocname"
                        class="form-control" type="text" name="parentLocName"
                        [(ngModel)]="parentLocName" id="locDtlParentLoc" readonly disabled>

                <ng-template #elseLocationPart>
                  <ng-select [disabled]="pageType==='View'" class="custom" #parentLocation="ngModel"
                    [ngStyle]="{'background-color':pageType==='View'?'#e9ecef':'#fff'}" [multiple]="false"
                    [(ngModel)]="location.parentLocationId" id="parentLocation" name="installedLocation"
                    placeholder="Choose Parent Location">
                    <ng-option value="null" disabled selected>Parent Location</ng-option>
                    <ng-option *ngFor="let loc of locationListForDropDown" [value]="loc.id">{{loc.name}}</ng-option>
                  </ng-select>
                </ng-template> -->
              </div>
            </div>
          </div>
          <fieldset>
            <legend>Reporting Via Gateway</legend>
            <div class="row">
              <div class="col-12 col-md-6 col-lg-4 col-xl-3">
                <div class="form-group">
                  <label for="s_gw_sn">GW Serial Number</label>
                  <input class="form-control form-control-sm"
                  placeholder="Gateway Serial Number" type="text"
                  id="s_gw_sn"
                  [(ngModel)]="sensorDetailsData.gwSerialNumber"
                  [disabled]="pageType==='View'"/>
                </div>
              </div>
              <div class="col-12 col-md-6 col-lg-4 col-xl-3">
                <div class="form-group">
                  <label for="s_gw_lo">GW Location</label>
                  <input class="form-control form-control-sm"
                  placeholder="Gateway Location" type="text"
                  id="s_gw_lo"
                  [(ngModel)]="sensorDetailsData.gwLocationName"
                  [disabled]="pageType==='View'"/>
                </div>
              </div>
            </div>
          </fieldset>
        </div>
      </div>
      <!-- <fieldset>
        <legend>Signal Mapping</legend>
        <div class="row">
          <div class="col-12 col-md-4 col-lg-3 col-xl-2">
            <div class="form-group">
              <label for="s_map_name">Mapping Signal Name</label>
              <input class="form-control form-control-sm" placeholder="Mapping signal name" type="text"
                id="s_map_name" />
            </div>
          </div>
          <div class="col-12 col-md-4 col-lg-3 col-xl-2">
            <div class="form-group">
              <label for="s_st">Signal Type</label>
              <select class="form-control form-control-sm" id="s_st">
                <option>Pressure</option>
                <option>Pressure - 1</option>
              </select>
            </div>
          </div>
          <div class="col-12 col-md-4 col-lg-2 col-xl-2">
            <div class="form-group">
              <label for="s_so_UMO">Source UOM</label>
              <select class="form-control form-control-sm" id="s_so_UMO">
                <option>psi</option>
                <option>psi - 1</option>
              </select>
            </div>
          </div>
          <div class="col-12 col-md-4 col-lg-2 col-xl-2">
            <div class="form-group">
              <label for="s_low">Low: <i>xxxx >></i></label>
              <div class="input-group input-group-sm">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <span class="">psi</span>
                  </span>
                </div>
                <input class="form-control form-control-sm" placeholder="0.0" type="text" id="s_low" />
              </div>
            </div>
          </div>
          <div class="col-12 col-md-6 col-lg-2 col-xl-2">
            <div class="form-group">
              <label for="s_high">High: <i>yyy >></i></label>
              <div class="input-group input-group-sm">
                <div class="input-group-prepend">
                  <span class="input-group-text">
                    <span class="">psi</span>
                  </span>
                </div>
                <input class="form-control form-control-sm" placeholder="5000.0" type="text" id="s_high" />
              </div>
            </div>
          </div>
        </div>
      </fieldset> -->
      <div class="row mt-3" *ngIf="sensorDetailsData">
        <div class="col-12">
          <table class="table table-sm table-bordered table-hover org-table-fonts">
            <thead class="thead-dark">
              <tr>
                <th>Signal Name</th>
                <!-- Display Associat location/Name Columns if sensr is linked - START -->
                <th *ngIf="sensorDetailsData.isLink">Asset/Location Association</th>
                <th *ngIf="sensorDetailsData.isLink">Association Name</th>
                <!-- Display Associat location/Name Columns if sensr is linked - END -->
                <th>Last Value</th>
                <th>Report Time</th>
                <th>Alarm State</th>
              </tr>
            </thead>
            <tbody>
              <ng-container *ngFor="let signalsData of sensorDetailsData.node">
                <tr *ngIf="checkRowDisplay(signalsData)">
                  <td><i class="demo-icon icon-sig-temperature"></i> {{signalsData.signalName}}</td>
                  <!-- Display Associat location/Name Columns if sensr is linked - START -->
                  <td *ngIf="sensorDetailsData.isLink">
                    <i class="demo-icon mr-2" [ngClass]="{'icon-asset-robot' : signalsData.assetId, 'icon-location' : !signalsData.assetId}"></i>
                    <a [routerLink]="['/loc/view/', sensorDetailsData.parentOrganizationId, sensorDetailsData.parentOrganizationName, sensorDetailsData.parentLocationId]">
                    {{sensorDetailsData.parentLocationName}}
                    </a>
                    <a *ngIf="signalsData.assetId" [routerLink]="['/asset/view/', sensorDetailsData.parentOrganizationId, sensorDetailsData.parentOrganizationName, sensorDetailsData.parentLocationId, signalsData.assetId]"> > {{signalsData.assetName }}</a>
                  </td>
                  <td *ngIf="sensorDetailsData.isLink">{{signalsData.associationName}}</td>
                  <!-- Display Associat location/Name Columns if sensr is linked - END -->
                  <td>{{signalsData.signalValue}}</td>
                  <td>{{signalsData.modifiedOn}}</td>
                  <td><i class="demo-icon icon-warn text-danger mr-2"></i> {{signalsData.alarmState}}</td>
                </tr>
              </ng-container>
            </tbody>
          </table>
        </div>
      </div>
      <div class="ml-auto text-right" *ngIf="pageType !=='View'">
        <button class="btn btn-secondary btn-sm mr-2" id="adminSensorCancel">Cancel</button>
        <button class="btn btn-info btn-sm" type="submit" id="adminSensorSave">Save</button>
      </div>
    </div>
  </div>
</div>
